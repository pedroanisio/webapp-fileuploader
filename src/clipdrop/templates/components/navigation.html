{# ==========================================================================
   Navigation Component
   Includes: Header nav, Mobile nav, Bottom nav
   ========================================================================== #}

{# Desktop Navigation Header #}
<header role="banner">
    <nav class="navbar" aria-label="Main navigation">
        <div class="navbar-container container">
            <a href="{{ url_for('upload_file') }}" class="navbar-brand">
                <i class="fas fa-cloud-upload-alt" aria-hidden="true"></i>
                <span>ClipDrop</span>
            </a>
            {% if current_user.is_authenticated %}
            <ul class="nav nav-desktop">
                <li class="nav-item">
                    <a href="{{ url_for('upload_file') }}" class="nav-link {% if active_page == 'files' %}is-active{% endif %}">
                        <i class="fas fa-folder-open nav-icon" aria-hidden="true"></i>
                        <span>Files</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{{ url_for('shared_clipboard') }}" class="nav-link {% if active_page == 'clipboard' %}is-active{% endif %}">
                        <i class="fas fa-clipboard nav-icon" aria-hidden="true"></i>
                        <span>Clipboard</span>
                    </a>
                </li>
            </ul>
            {% endif %}
            <div class="nav-actions">
                {% if current_user.is_authenticated %}
                    <button type="button" class="btn btn-ghost btn-icon nav-action-btn" onclick="toggleTheme()" aria-label="Toggle theme" title="Toggle theme (t)">
                        <i class="fas fa-adjust" aria-hidden="true"></i>
                    </button>
                    <button type="button" class="btn btn-ghost btn-icon nav-action-btn nav-desktop-only" onclick="showShortcutsHelp()" aria-label="Keyboard shortcuts" title="Keyboard shortcuts (?)">
                        <i class="fas fa-keyboard" aria-hidden="true"></i>
                    </button>
                    <div class="user-pill" aria-label="Signed in user">
                        {% if current_user.avatar_url %}
                            <img src="{{ current_user.avatar_url }}" alt="" class="user-avatar">
                        {% else %}
                            <span class="user-avatar-placeholder" aria-hidden="true">
                                <i class="fas fa-user"></i>
                            </span>
                        {% endif %}
                        <span class="user-name">{{ current_user.username }}</span>
                    </div>
                    <a href="{{ url_for('auth.logout') }}" class="btn btn-outline-primary btn-sm">
                        Sign out
                    </a>
                {% else %}
                    <a href="{{ url_for('auth.login') }}" class="btn btn-primary btn-sm">
                        Sign in
                    </a>
                {% endif %}
            </div>
            {% if current_user.is_authenticated %}
            <button class="nav-mobile-toggle" aria-expanded="false" aria-controls="mobile-nav" aria-label="Open menu">
                <i class="fas fa-bars" aria-hidden="true"></i>
            </button>
            {% endif %}
        </div>
    </nav>
</header>

{# Mobile Navigation Drawer #}
<div class="mobile-nav-backdrop" id="mobile-nav-backdrop"></div>
<nav class="mobile-nav" id="mobile-nav" aria-label="Mobile navigation">
    <div class="mobile-nav-header">
        <span class="navbar-brand">
            <i class="fas fa-cloud-upload-alt" aria-hidden="true"></i> ClipDrop
        </span>
        <button class="btn-ghost btn-icon" aria-label="Close menu" id="mobile-nav-close">
            <i class="fas fa-times" aria-hidden="true"></i>
        </button>
    </div>
    <div class="mobile-nav-body">
        {% if current_user.is_authenticated %}
            <a href="{{ url_for('upload_file') }}" class="mobile-nav-link {% if active_page == 'files' %}is-active{% endif %}">
                <i class="fas fa-folder-open mobile-nav-icon" aria-hidden="true"></i>
                <span>Files</span>
            </a>
            <a href="{{ url_for('shared_clipboard') }}" class="mobile-nav-link {% if active_page == 'clipboard' %}is-active{% endif %}">
                <i class="fas fa-clipboard mobile-nav-icon" aria-hidden="true"></i>
                <span>Clipboard</span>
            </a>
            <div class="mobile-nav-divider"></div>
            <button type="button" class="mobile-nav-link" onclick="toggleTheme()">
                <i class="fas fa-adjust mobile-nav-icon" aria-hidden="true"></i>
                <span>Toggle theme</span>
            </button>
            <a href="{{ url_for('auth.logout') }}" class="mobile-nav-link">
                <i class="fas fa-sign-out-alt mobile-nav-icon" aria-hidden="true"></i>
                <span>Sign out</span>
            </a>
        {% else %}
            <a href="{{ url_for('auth.login') }}" class="mobile-nav-link">
                <i class="fas fa-sign-in-alt mobile-nav-icon" aria-hidden="true"></i>
                <span>Sign in</span>
            </a>
        {% endif %}
    </div>
</nav>
